function [ v, ok ] = getvarfromfile( fname, varname, condition )% GETVARFROMFILE  Get a variable from a file%% [ v, ok ] = getvarfromfile( fname, varname, condition )% 29-Jan-02 -- created (RFM)% set default argumentsdefarg('condition','1');% open filefid=fopen(fname,'r');if fid<0,	error(sprintf('file ''%s'' not found\n',fname));end% step through lines of fileok=0;while ~feof(fid),		% get next line, and quit if its first character is a hyphen	cmd=fgetl(fid);	if length(cmd)>0 & cmd(1)=='-',		break;	end	% see if this line gives us the variable, and meets the condition		clear(varname);	eval(cmd);	if exist(varname,'var') & eval(condition)==1,		ok=1;		break	end	endfclose(fid);% return variableif ok,	v=eval(varname);else	v=[];endreturn